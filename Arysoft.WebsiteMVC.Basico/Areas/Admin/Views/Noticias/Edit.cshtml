@model Arysoft.WebsiteMVC.Basico.Models.Noticia
@using Arysoft.WebsiteMVC.Basico.Models;

@{
    bool esNueva = Model.Status == NoticiaStatus.Ninguno;
    string titleSmall = "EDITAR";
    string classCard = "card";
    ViewBag.Title = "Editar";

    if (esNueva)
    {
        titleSmall = "NUEVA";
        ViewBag.Title = "Nueva";
    }

    switch (Model.Status)
    {
        case NoticiaStatus.Ninguno:
        case NoticiaStatus.Nueva:
            classCard = "card border-primary";
            break;
        case NoticiaStatus.Publicada:
            classCard = "card border-success";
            break;
        case NoticiaStatus.Oculta:
            classCard = "card border-secondary";
            break;
        case NoticiaStatus.Eliminada:
            classCard = "card border-danger";
            break;
    }

}

<div class="row">
    <div class="col-12">
        <h3 class="mt-2">Noticia <small>@titleSmall</small></h3>
        <hr />
    </div>
</div>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <div class="row">
        <!-- EDITOR -->
        <div class="col-8">
            <div class="@classCard shadow">
                <div class="card-body">
                    <div class="form-horizontal">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        @Html.HiddenFor(model => model.NoticiaID)
                        @Html.HiddenFor(model => model.ContadorVisitas)
                        @Html.HiddenFor(model => model.MeGusta)
                        @Html.HiddenFor(model => model.FechaCreacion)

                        <div class="form-group">
                            @Html.LabelFor(model => model.Titulo)
                            @Html.EditorFor(model => model.Titulo, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Titulo, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.Resumen)
                            @Html.EditorFor(model => model.Resumen, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Resumen, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.HTMLContent)
                            @Html.EditorFor(model => model.HTMLContent, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.HTMLContent, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.Autor)
                            @Html.EditorFor(model => model.Autor, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Autor, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- LATERAL DERECHA -->
        <div class="col-4">
            <ul class="nav nav-tabs" id="opcionesTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <a class="nav-link active" id="opciones-tab" data-toggle="tab" href="#opciones" role="tab" aria-controls="opciones" aria-selected="true">
                        Opciones
                    </a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" id="archivos-tab" data-toggle="tab" href="#archivos" role="tab" aria-controls="archivos" aria-selected="false">
                        Archivos
                        <span class="badge badge-primary badge-pill">00</span>
                    </a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" id="notas-tab" data-toggle="tab" href="#notas" role="tab" aria-controls="notas" aria-selected="false">
                        Notas
                        <span class="badge badge-primary badge-pill">00</span>
                    </a>
                </li>
            </ul>
            <div class="tab-content" id="opcionesTabContent">
                <!-- OPCIONES -->
                <div class="tab-pane fade show active" id="opciones" role="tabpanel" aria-labelledby="opciones-tab">
                    <div class="form-inline mt-2">
                        <label class="mr-2">Imagen Principal</label>
                        <div class="input-group mt-2">
                            <div class="custom-file mr-2">
                                <input type="file" class="custom-file-input" id="ImagenArchivo" />
                                <label class="custom-file-label" for="ImagenArchivo">Selecciona una imagen</label>
                            </div>
                            <button type="button" class="btn btn-outline-primary"><i class="bi-upload"></i></button>
                        </div>
                        <small class="form-text text-muted">
                            Seleccione de su equipo, la imagen principal a subir en la noticia, se recomienda
                            que sea de una resolución de 1170x380 pixeles para mantener una uniformidad en las 
                            imágenes de las noticias.
                        </small>
                    </div>
                    <div class="form-group mt-2">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" id="TieneGaleria" aria-describedby="TieneGaleriaHelpBlock" />
                            <label class="custom-control-label" for="TieneGaleria">Tiene galeria</label>
                        </div>
                        <small id="TieneGaleriaHelpBlock" class="form-text text-muted">
                            Indica si algunos de los archivos de imagenes adjuntos, deben formar una galeria dentro de la
                            noticia, para ello debe incluir el tag <strong>[GALERIA]</strong> dentro del Contenido.
                        </small>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.Idioma)
                        @Html.EnumDropDownListFor(model => model.Idioma, htmlAttributes: new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.Idioma, "", new { @class = "text-danger" })
                        <small id="IdiomaHelpBlock" class="form-text text-muted">
                            Establesca el idioma en el que se esta redactando el contenido, esto sirve para
                            clasificar la noticia, para la lectura correcta del visitante en el idioma que 
                            seleccione.
                        </small>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.FechaPublicacion)
                        @Html.EditorFor(model => model.FechaPublicacion, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.FechaPublicacion, "", new { @class = "text-danger" })
                        <small id="FechaPublicacionHelpBlock" class="form-text text-muted">
                            Indique la fecha en que se generá la noticia, esto es indistinto cuando se genera
                            el registro de la noticia en el sistema.
                        </small>
                    </div>
                    <div class="form-group">
                        <div class="custom-control custom-radio custom-control-inline">
                            <input type="radio" id="statusPublicado" name="status" class="custom-control-input" aria-describedby="StatusHelpBlock" />
                            <label class="custom-control-label" for="statusPublicado">Publicada</label>
                        </div>
                        <div class="custom-control custom-radio custom-control-inline">
                            <input type="radio" id="statusOculto" name="status" class="custom-control-input" aria-describedby="StatusHelpBlock" />
                            <label class="custom-control-label" for="statusOculto">Oculta</label>
                        </div>
                        <small id="StatusHelpBlock" class="form-text text-muted">
                            Establesca si la publicación, se encuentra <span class="badge badge-success">PUBLICADA</span> o se encuentra
                            <span class="badge badge-secondary">OCULTA</span> a la vista de los visitantes.
                        </small>
                    </div>
                </div>

                <!-- ARCHIVOS -->
                <div class="tab-pane fade" id="archivos" role="tabpanel" aria-labelledby="archivos-tab">
                    <h4 class="mt-3">Archivos</h4>
                    <ul class="list-group">
                        <li class="list-group-item"><i class="bi-file"></i> An item</li>
                        <li class="list-group-item"><i class="bi-file"></i> A second item</li>
                        <li class="list-group-item"><i class="bi-image"></i> A third item</li>
                    </ul>
                </div>

                <!-- NOTAS -->
                <div class="tab-pane fade" id="notas" role="tabpanel" aria-labelledby="notas-tab">
                    <h4 class="mt-3">Notas</h4>
                    <div class="card bg-warning shadow-sm mt-4">
                        <div class="card-body">
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <footer class="blockquote-footer">
                                Adrián Castillo, 01/08/2021 12:15
                            </footer>
                        </div>
                    </div>
                    <div class="card bg-warning shadow-sm mt-4">
                        <div class="card-body">
                            <p class="card-text">
                                Some quick example text to build on the card title and make up the bulk of the card's content.
                            </p>
                            <footer class="blockquote-footer">
                                Elizabeth Retana, 31/07/2021 12:10 am
                            </footer>
                        </div>
                    </div>
                </div>
            </div>
        </div>            
    </div>
    <div class="row">
        <div class="col-12">
            <div class="form-horizontal text-right">
                <hr />
                @Html.Raw(
                     @Html.ActionLink("[cancelar]", "Index", null, new { @class = "btn btn-secondary" }).ToHtmlString()
                         .Replace("[cancelar]", "<i class='bi-arrow-left-square'></i> Cancelar")
                )
                <button type="submit" class="btn btn-primary">
                    <i class="bi-save"></i> Guardar
                </button>
            </div>
        </div>
    </div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
